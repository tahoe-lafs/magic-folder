End-to-end in-memory tests for websocket features